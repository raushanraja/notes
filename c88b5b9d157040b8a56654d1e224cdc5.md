id: c88b5b9d157040b8a56654d1e224cdc5
parent_id: 2d9cce6e0a704272bca1a4ce3ec53dfb
item_type: 1
item_id: 8fc6c294f13f4724948d42245559328b
item_updated_time: 1705443061589
title_diff: "[]"
body_diff: "[{\"diffs\":[[0,\"res full\"],[1,\"\\\n\\\n* * *\\\n* * *\\\n\\\n### Basic TCP Server\\\n\\\n#### Server:\\\n- Import TCPListener\\\n- Bind to a port and start listening\\\n- Wait for incoming connection and move the stream connection to new thread\\\n- Process the new connection in a separate thread using a method\\\n\\\n```rust\\\nuse std::io::{Read, Write};\\\nuse std::net::{Shutdown, TcpListener, TcpStream};\\\nuse std::thread::spawn;\\\n\\\nfn client(mut stream: TcpStream) {\\\n    let mut data = [0 as u8; 5];\\\n    while match stream.read(&mut data) {\\\n        Ok(size) => {\\\n            stream.write(&data[0..size]).unwrap();\\\n            println!(\\\"An connection opened: {}\\\", stream.peer_addr().unwrap());\\\n            false // if this is true, the whlie loop won't stop\\\n        }\\\n        Err(_) => {\\\n            println!(\\\n                \\\"An error occured, connection closed: {}\\\",\\\n                stream.peer_addr().unwrap()\\\n            );\\\n            stream.shutdown(Shutdown::Both).unwrap();\\\n            false\\\n        }\\\n    } {}\\\n}\\\n\\\nfn main() {\\\n    let listener = TcpListener::bind(\\\"0.0.0.0:3333\\\").unwrap();\\\n    println!(\\\"Ready to start connection\\\");\\\n    for stream in listener.incoming() {\\\n        match stream {\\\n            Ok(stream) => {\\\n                print!(\\\"New connection: {}\\\", stream.peer_addr().unwrap());\\\n                spawn(move || client(stream));\\\n            }\\\n            Err(e) => {\\\n                println!(\\\"Error: {}\\\", e);\\\n            }\\\n        }\\\n    }\\\n    println!(\\\"Closing the server\\\");\\\n    drop(listener);\\\n}\\\n\\\n```\\\n\\\n\\\n### Basic TCP Client\\\n#### Client\\\n- Import TCPStream\\\n- Connect to the url:port\\\n- Use `write()` to write some data\\\n- Use `read_exact()` to read some data\\\n- Close the Connection\\\n\\\n```rust\\\nuse std::io::{Read, Write};\\\nuse std::net::{TcpStream, Shutdown};\\\nuse std::str::from_utf8;\\\nuse std::u8;\\\n\\\nfn main() {\\\n    match TcpStream::connect(\\\"localhost:3333\\\") {\\\n        Ok(mut stream) => {\\\n            println!(\\\"Successfully connected to serve on port 3333\\\");\\\n            let message = b\\\"Hello\\\";\\\n            stream.write(message).unwrap();\\\n            println!(\\\"Send hello, awaiting reply...\\\");\\\n\\\n            let mut data = [0 as u8; 5];\\\n\\\n            match stream.read_exact(&mut data) {\\\n                Ok(_) => {\\\n                    if &data == message {\\\n                        print!(\\\"Reply is ok!\\\");\\\n                        stream.shutdown(Shutdown::Both).unwrap();\\\n                    } else {\\\n                        let text = from_utf8(&data).unwrap();\\\n                        println!(\\\"Unexpected reply: {}\\\", text);\\\n                    }\\\n                }\\\n                Err(e) => {\\\n                    println!(\\\"Failed to receive the data: {}\\\", e);\\\n                }\\\n            }\\\n        }\\\n        Err(e) => {\\\n            println!(\\\"Failed to connect: {}\\\", e);\\\n        }\\\n    }\\\n}\\\n\\\n```\\\n\"]],\"start1\":599,\"start2\":599,\"length1\":8,\"length2\":2746}]"
metadata_diff: {"new":{"user_data":""},"deleted":[]}
encryption_cipher_text: 
encryption_applied: 0
updated_time: 2024-01-16T22:18:39.414Z
created_time: 2024-01-16T22:18:39.414Z
type_: 13